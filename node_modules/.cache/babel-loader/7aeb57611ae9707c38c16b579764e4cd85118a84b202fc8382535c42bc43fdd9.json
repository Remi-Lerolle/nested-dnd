{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nexport const widgetSlice = createSlice({\n  name: \"listOfWidgets\",\n  initialState: {\n    value: []\n  },\n  reducers: {\n    addWidget: (state, action) => {\n      console.log(\"-- in addWidget reducer \");\n      console.log(action.payload);\n      const newState = [...state.value];\n      console.log(newState);\n      newState.push(action.payload);\n      state.value = newState;\n    },\n    removeWidget: (state, action) => {\n      console.log(\"-- in removeWidget reducer \");\n      console.log(action.payload);\n      const index = action.payload;\n      const newState = [...state.value];\n      newState.splice(index, 1);\n      state.value = newState;\n    },\n    updateWidgetListOfDescendant: (state, action) => {\n      console.log(\"-- in updateWidgetListOfDescendant reducer \");\n      console.log(action);\n      const newState = [...state.value];\n      console.log(newState);\n      newState[action.payload.index].children.push(action.payload.newDescendant);\n      console.log(newState);\n      state.value = newState;\n    },\n    updateWidgetPosition: (state, action) => {\n      const dropped = action.payload;\n      console.log(dropped);\n      const newState = [...state.value];\n      newState[dropped.addOrUpdatePos].clientOffset = dropped.clientOffset;\n      console.log(newState[dropped.addOrUpdatePos]);\n      state.value = newState;\n    },\n    removeWidgetInGrid: (state, action) => {\n      const gridIndex = action.payload.index;\n      const indexInGrid = action.payload.indexInGrid;\n      const newChildren = [...state.value[gridIndex].children];\n      newChildren.splice(indexInGrid, 1);\n      const newState = [...state.value];\n      newState[gridIndex].children = newChildren;\n      console.log(newState);\n    }\n  }\n});\nexport const {\n  addWidget,\n  removeWidget,\n  removeWidgetInGrid,\n  updateWidgetPosition,\n  updateWidgetListOfDescendant\n} = widgetSlice.actions;\nexport default widgetSlice.reducer;","map":{"version":3,"names":["createSlice","widgetSlice","name","initialState","value","reducers","addWidget","state","action","console","log","payload","newState","push","removeWidget","index","splice","updateWidgetListOfDescendant","children","newDescendant","updateWidgetPosition","dropped","addOrUpdatePos","clientOffset","removeWidgetInGrid","gridIndex","indexInGrid","newChildren","actions","reducer"],"sources":["/home/remi/REACT/nested-dnd/src/widgetSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const widgetSlice = createSlice( {\n\tname: \"listOfWidgets\",\n\tinitialState: {\n\t\tvalue: []\n\t},\n\treducers:{\n\t\taddWidget: ( state, action ) => {\n\t\t\tconsole.log(\"-- in addWidget reducer \")\n\t\t\tconsole.log(action.payload)\n\t\t\tconst newState = [...state.value];\n\t\t\tconsole.log(newState)\n\t\t\tnewState.push( action.payload );\n\t\t\tstate.value = newState\n\t\t},\n\t\tremoveWidget: (state, action) => {\n\t\t\tconsole.log(\"-- in removeWidget reducer \")\n\t\t\tconsole.log(action.payload)\n\n\t\t\tconst index = action.payload;\n\n\t\t\tconst newState = [...state.value];\n\t\t\tnewState.splice(index,1);\n\t\t\tstate.value = newState;\n\n\t\t},\n\t\tupdateWidgetListOfDescendant: (state, action) => {\n\t\t\tconsole.log(\"-- in updateWidgetListOfDescendant reducer \")\n\t\t\tconsole.log(action)\n\n\t\t\tconst newState = [...state.value];\n\t\t\tconsole.log(newState)\n\t\t\tnewState[action.payload.index].children.push( action.payload.newDescendant )\n\t\t\tconsole.log(newState)\n\t\t\tstate.value = newState\n\t\t},\n\t\tupdateWidgetPosition: (state, action) => {\n\t\t\tconst dropped = action.payload;\n\t\t\tconsole.log(dropped)\n\n\t\t\tconst newState = [...state.value];\n\t\t\tnewState[dropped.addOrUpdatePos].clientOffset = dropped.clientOffset;\n\t\t\tconsole.log(newState[ dropped.addOrUpdatePos ])\n\t\t\tstate.value = newState;\n\t\t},\n\t\tremoveWidgetInGrid: (state, action) => {\n\t\t\tconst gridIndex = action.payload.index;\n\t\t\tconst indexInGrid = action.payload.indexInGrid;\n\n\t\t\tconst newChildren = [...state.value[gridIndex].children];\n\t\t\tnewChildren.splice(indexInGrid, 1 )\n\n\t\t\tconst newState = [...state.value];\n\t\t\tnewState[gridIndex].children = newChildren;\n\t\t\tconsole.log(newState )\n\t\t}\n\t}\n})\n\nexport const { addWidget, removeWidget, removeWidgetInGrid, updateWidgetPosition, updateWidgetListOfDescendant } = widgetSlice.actions\n\nexport default widgetSlice.reducer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}