{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nexport const widgetSlice = createSlice({\n  name: \"listOfWidgets\",\n  initialState: {\n    value: []\n  },\n  reducers: {\n    addWidget: (state, action) => {\n      // console.log(\"-- in addWidget reducer \")\n      // console.log(action.payload)\n      const newState = [...state.value];\n      console.log(newState);\n      newState.push(action.payload);\n      state.value = newState;\n    },\n    removeWidget: (state, action) => {\n      console.log(\"-- in removeWidget reducer \");\n      console.log(action.payload);\n      const index = action.payload;\n      const newState = [...state.value];\n      newState.splice(index, 1);\n      state.value = newState;\n    },\n    updateWidgetListOfDescendant: (state, action) => {\n      console.log(\"-- in updateWidgetListOfDescendant reducer \");\n      console.log(action);\n      const newState = [...state.value];\n      console.log(newState);\n      newState[action.payload.index].children.push(action.payload.newDescendant);\n      console.log(newState);\n      state.value = newState;\n    },\n    updateWidgetPosition: (state, action) => {\n      const dropped = action.payload;\n      console.log(dropped);\n      const newState = [...state.value];\n      newState[dropped.addOrUpdatePos].clientOffset = dropped.clientOffset;\n      console.log(newState[dropped.addOrUpdatePos]);\n      state.value = newState;\n    },\n    removeWidgetInGrid: (state, action) => {\n      const gridIndex = action.payload.index;\n      const indexInGrid = action.payload.indexInGrid;\n      const newChildren = [...state.value[gridIndex].children];\n      newChildren.splice(indexInGrid, 1);\n      const newState = [...state.value];\n      newState[gridIndex].children = newChildren;\n      console.log(newState);\n    }\n  }\n});\nexport const {\n  addWidget,\n  removeWidget,\n  removeWidgetInGrid,\n  updateWidgetPosition,\n  updateWidgetListOfDescendant\n} = widgetSlice.actions;\nexport default widgetSlice.reducer;","map":{"version":3,"names":["createSlice","widgetSlice","name","initialState","value","reducers","addWidget","state","action","newState","console","log","push","payload","removeWidget","index","splice","updateWidgetListOfDescendant","children","newDescendant","updateWidgetPosition","dropped","addOrUpdatePos","clientOffset","removeWidgetInGrid","gridIndex","indexInGrid","newChildren","actions","reducer"],"sources":["/home/remi/REACT/nested-dnd/src/widgetSlice.js"],"sourcesContent":["import { createSlice } from \"@reduxjs/toolkit\";\n\nexport const widgetSlice = createSlice({\n\tname: \"listOfWidgets\",\n\tinitialState: {\n\t\tvalue: []\n\t},\n\treducers: {\n\t\taddWidget: (state, action) => {\n\t\t\t// console.log(\"-- in addWidget reducer \")\n\t\t\t// console.log(action.payload)\n\t\t\tconst newState = [...state.value];\n\t\t\tconsole.log(newState)\n\t\t\tnewState.push(action.payload);\n\t\t\tstate.value = newState\n\t\t},\n\t\tremoveWidget: (state, action) => {\n\t\t\tconsole.log(\"-- in removeWidget reducer \")\n\t\t\tconsole.log(action.payload)\n\n\t\t\tconst index = action.payload;\n\n\t\t\tconst newState = [...state.value];\n\t\t\tnewState.splice(index, 1);\n\t\t\tstate.value = newState;\n\n\t\t},\n\t\tupdateWidgetListOfDescendant: (state, action) => {\n\t\t\tconsole.log(\"-- in updateWidgetListOfDescendant reducer \")\n\t\t\tconsole.log(action)\n\n\t\t\tconst newState = [...state.value];\n\t\t\tconsole.log(newState)\n\t\t\tnewState[action.payload.index].children.push(action.payload.newDescendant)\n\t\t\tconsole.log(newState)\n\t\t\tstate.value = newState\n\t\t},\n\t\tupdateWidgetPosition: (state, action) => {\n\t\t\tconst dropped = action.payload;\n\t\t\tconsole.log(dropped)\n\n\t\t\tconst newState = [...state.value];\n\t\t\tnewState[dropped.addOrUpdatePos].clientOffset = dropped.clientOffset;\n\t\t\tconsole.log(newState[dropped.addOrUpdatePos])\n\t\t\tstate.value = newState;\n\t\t},\n\t\tremoveWidgetInGrid: (state, action) => {\n\t\t\tconst gridIndex = action.payload.index;\n\t\t\tconst indexInGrid = action.payload.indexInGrid;\n\n\t\t\tconst newChildren = [...state.value[gridIndex].children];\n\t\t\tnewChildren.splice(indexInGrid, 1)\n\n\t\t\tconst newState = [...state.value];\n\t\t\tnewState[gridIndex].children = newChildren;\n\t\t\tconsole.log(newState)\n\t\t}\n\t}\n})\n\nexport const { addWidget, removeWidget, removeWidgetInGrid, updateWidgetPosition, updateWidgetListOfDescendant } = widgetSlice.actions\n\nexport default widgetSlice.reducer"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}